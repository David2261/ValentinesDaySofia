var HEART_ART = [
  "                                                                                                    ",
  "                                                                                                    ",
  "                                                                                                    ",
  "                          .......                                   ......                          ",
  "                   .... ............. .                      .... ..............                    ",
  "               .....:+##############*-.. .              ......-*##############+:.. ..               ",
  "               ..+######################+:..            ..:*######################=..               ",
  "            ..-############################=..        ..=############################:..            ",
  "          ..-################################=..    ..+################################:..          ",
  "        ...*###################################:....:###################################*...        ",
  "      ...:######################################-..=######################################....      ",
  "      ..-########################################-=########################################:..      ",
  "      .:####################################################################################..      ",
  "      .*####################################################################################+.      ",
  "    ..-######################################################################################:..    ",
  "    ..=######################################################################################=..    ",
  "    ..*######################################################################################+..    ",
  "    ..*######################################################################################+..    ",
  "    ..*######################################################################################+..    ",
  "    ..=######################################################################################=..    ",
  "    ..-######################################################################################:..    ",
  "      .#####################################################################################+.      ",
  "      .-####################################################################################:.      ",
  "      ..*##################################################################################=..      ",
  "      ...#################################################################################+.        ",
  "        ..###############################################################################*..        ",
  "        ..:#############################################################################+.          ",
  "        ....*##########################################################################-.           ",
  "           ..=#######################################################################*...           ",
  "            ..:#####################################################################=...            ",
  "             ...=#################################################################+..               ",
  "               ...+#############################################################*..                 ",
  "                 ...+#########################################################*:.                   ",
  "                   ...*######################################################..                     ",
  "                    ....+#################################################*:...                     ",
  "                        ..+##############################################:..                        ",
  "                          ..+#########################################*...                          ",
  "                            ..=#####################################*...                            ",
  "                              ..=#################################*...                              ",
  "                                ..=#############################*...                                ",
  "                                ....=#########################*:....                                ",
  "                                   ...+######################:...                                   ",
  "                                     ...*##################-...                                     ",
  "                                       ...###############+...                                       ",
  "                                         ..=############:..                                         ",
  "                                           ..*########=..                                           ",
  "                                             .-######..                                             ",
  "                                             ...*##*...                                             ",
  "                                                .==..                                               ",
  "                                                ...."
].join("\n");
const pre = document.getElementById("ascii-art");

const base = HEART_ART.split("\n");

// символы для перелива
const palette = ".,-~:;=!*#$@";

let phase = 0;

setInterval(() => {
  phase += 0.15;

  const animated = base.map((line, y) => {
    return [...line].map((char, x) => {

      // пробелы не трогаем
      if (char === " ") return " ";

      // создаём волну по координатам
      const wave =
        Math.sin(x * 0.15 + phase) +
        Math.cos(y * 0.25 + phase);

      // переводим в индекс палитры
      const index = Math.floor(
        ((wave + 2) / 4) * (palette.length - 1)
      );

      return palette[index];
    }).join("");
  }).join("\n");

  pre.textContent = animated;

}, 60);

// ── Маленькие сердечки ──
(function () {
  var container = document.getElementById("hearts-container");
  var SVG_NS = "http://www.w3.org/2000/svg";
  var HEART_PATH = "M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z";
  for (var i = 0; i < 25; i++) {
    var size = 12 + Math.random() * 20;
    var dur = 6 + Math.random() * 8;
    var delay = Math.random() * 10;
    var left = Math.random() * 100;
    var opacity = 0.3 + Math.random() * 0.5;
    var wrapper = document.createElement("div");
    wrapper.className = "floating-heart";
    wrapper.style.left = left + "%";
    wrapper.style.animationDuration = dur + "s";
    wrapper.style.animationDelay = delay + "s";
    wrapper.style.opacity = opacity;
    var svg = document.createElementNS(SVG_NS, "svg");
    svg.setAttribute("width", size);
    svg.setAttribute("height", size);
    svg.setAttribute("viewBox", "0 0 24 24");
    svg.setAttribute("fill", "hsl(350, 80%, 55%)");
    var path = document.createElementNS(SVG_NS, "path");
    path.setAttribute("d", HEART_PATH);
    svg.appendChild(path);
    wrapper.appendChild(svg);
    container.appendChild(wrapper);
  }
})();
// ── Вращение надписи ──
(function () {
  var messages = [
    "С Днём Святого Валентина, София ❤",
    "З Днем Святого Валентина, Софіє ❤",
    "Alles Liebe zum Valentinstag, Sofia ❤",
    "Happy Valentine's Day, Sofia ❤"
  ];
  var el = document.getElementById("greeting");
  var idx = 0;
  el.textContent = messages[0];
  setInterval(function () {
    el.style.opacity = "0";
    setTimeout(function () {
      idx = (idx + 1) % messages.length;
      el.textContent = messages[idx];
      el.style.opacity = "1";
    }, 600);
  }, 6000);
})();
